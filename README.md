# Wiz.Picture.md

PS：因为不知道取什么名字才好，所以仿照akof1314的[Wiz.Editor.md](https://github.com/akof1314/Wiz.Editor.md)“山寨”了一个名字Wiz.Picture.md。

## 目的

因为只适用于Windows客户端，有很大的局限性。但是我认为这种支持将附件中的图片按照Markdown图片语法的格式插入文档中的功能非常方便管理，也更加适合为知笔记的Markdown文档。所以写了这个插件想验证这种功能的实用性，如果大家觉得这种方式好用，可以向Wiz官方提建议，要求官方添加这种功能。如果提建议的人多了，说不定官方会在以后的版本中添加这种功能（Wiz官方来做的话，就是跨平台的了）。

## 功能

* 支持将Markdown文档中的图片附件按照正常的Markdown语法（`![](路径)`）插入文档中（这是主要功能，后面的两个只能算是方便大家的添头）
* 文档工具栏中提供“下载所有附件”和“下载所有图片附件”按钮，方便下载当前文档附件
* 文档列表右键菜单和文件夹右键菜单中提供“下载所有附件”和“下载所有图片附件”功能，方便一键下载多个文档、整个文件夹下的文档或者所有文档中的附件（之前在贴吧中有看到有人提出需要一键下载附件的需求）

## 需求

* 为知笔记Windows版客户端4.5 及 以上
* 仅适用于Windows客户端，如果要跨平台，只能说服官方来实现

## 使用方法

* 将需要使用的图片作为附件添加到Markdown文档，记下文件名，比如：`figure_1.png`
* 在Markdown文档中需要插入图片的地方，使用`http://wiz/`域名代表这个图片在附件中。比如：`![这是一个附件图片](http://wiz/figure_1.png)`
* 工具栏中的“下载所有附件”/“下载所有图片附件”可用于一键下载当前文档的所有附件

## 配置

目前就一个配置选项，“是否自动下载文档中引用的图片附件”（默认为不自动），所以就懒得去做个配置界面了。修改知笔记插件目录下（即选项设置中的“本地数据存储”路径下的“Plugins”目录）的`Wiz.Picture.md\plugin.ini`文件，将最后一行`AutoDownloadPicture=0`改为`AutoDownloadPicture=1`即可。

## 为什么用这种方式插入图片？

* 远程图片有可能失效，或者因为网络问题加载缓慢
* 将图片直接贴入Markdown文档中，容易在使用其他编辑器编辑时丢失图片
* 而Wiz自带的缓存功能导致我们只有将文档同步到其他客户端时，才会发现之前的图片已经丢失了
* 将图片存放在文档附件中，更加直观并且方便管理
* 可以利用为知笔记自带的附件版本管理功能
* 减少了修改文档时整体上传的数据量（我记得为知笔记以前使用的是整体上传，修改文档中的文字，会将整个文档包括图片一起重新上传）

## TODO

* 将远程图片自动下载并保存为附件
* 说服Wiz官方将这种Markdown文档的图片附件直接插入文档中的方式推广到其他平台客户端（这只能通过官方实现，而我并不知道如何说服Wiz官方。。。。。）